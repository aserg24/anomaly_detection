%%%%%
%% Usage: Set the following fields:
%%
%% \university{}
%% \author{}
%% \status{}
%% \title{}
%% \subtitle{} (optional)
%% \spec{Направление ...\\...} (optional)
%% \supervisor{}
%% \reviewer{}
%% \chief{}
%% \group{}
%% \facility{}
%% \city{}
%% \date{}
%% Then do \maketitle. And you'll get it.
%%%%%

\ProvidesPackage{statmodtitle}

\def\university#1{\gdef\@university{#1}}
\def\facility#1{\gdef\@facility{#1}}
\def\spec#1{\gdef\@spec{#1}}

\def\title#1{\gdef\@title{#1}}
\def\subtitle#1{\gdef\@subtitle{#1}}
\def\author#1{\gdef\@author{#1}}

\def\supervisor#1{\gdef\@supervisor{#1}}
\def\reviewer#1{\gdef\@reviewer{#1}}
\def\chief#1{\gdef\@chief{#1}}

\def\city#1{\gdef\@city{#1}}
\def\date#1{\gdef\@date{#1}}

\def\@author{\@latex@error{No \noexpand\author given}\@ehc}
\def\@title{\@latex@error{No \noexpand\title given}\@ehc}

\def\@supervisor{\@latex@warning@no@line{No \noexpand\supervisor given}}
\def\@reviewer{\@latex@warning@no@line{No \noexpand\reviewer given}}
\def\@chief{\@latex@warning@no@line{No \noexpand\chief given}}

\def\@city{\@latex@warning@no@line{No \noexpand\city given}}
\def\@university{\@latex@warning@no@line{No \noexpand\university given}}
\def\@facility{\@latex@warning@no@line{No \noexpand\facility given}}

\let\@spec\@empty
\let\@subtitle\@empty
\let\@date\today

\renewcommand{\maketitle}{
    \begin{titlepage}
        \begin{center}
            {\@university}\par
            {\@facility} \par
            \vspace{40mm}
            {\LARGE\bfВыпускная квалификационная работа бакалавра}\par
            \vspace{10mm}
            {\@author}\par
            \vspace{5mm}
            {\Large<<\scshape{\@title}>>}\par
            \vspace{5mm}
            {\@subtitle}\par
            \vspace{5mm}
            {\@spec}\par
        \end{center}
        \vfill
        \hfill
        \begin{minipage}[t]{80mm}\flushleft
%%            <<Допустить к защите>> \rule{3cm}{0.4pt}\par
            Заведующий кафедрой\par
            {\@chief}\par            
            \vspace{10mm}            
            Научный руководитель \par
            {\@supervisor}\par
%%            \vspace{10mm}
%%            Рецензент \par
%%            {\@reviewer}\par
        \end{minipage}
        \vspace{6mm}
        \vfill
        \begin{center}\@city\par\@date г.\end{center}
    \end{titlepage}
    \stepcounter{page}

    \global\let\@title\@empty
    \global\let\title\relax
    \global\let\@subtitle\@empty
    \global\let\subtitle\relax
    \global\let\@author\@empty
    \global\let\author\relax

    \global\let\@supervisor\@empty
    \global\let\@reviewer\@empty
    \global\let\@chief\@empty
    
    \global\let\@facility\@empty
    \global\let\@spec\@empty
    \global\let\@date\@empty
}
